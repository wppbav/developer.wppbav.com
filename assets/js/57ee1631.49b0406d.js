"use strict";(self.webpackChunkthe_fount=self.webpackChunkthe_fount||[]).push([[2948],{1470:(e,n,t)=>{t.d(n,{A:()=>w});var s=t(6540),r=t(8215),i=t(3104),a=t(6347),l=t(205),d=t(7485),c=t(1682),o=t(679);function h(e){return s.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:n,children:t}=e;return(0,s.useMemo)((()=>{const e=n??function(e){return h(e).map((({props:{value:e,label:n,attributes:t,default:s}})=>({value:e,label:n,attributes:t,default:s})))}(t);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p({value:e,tabValues:n}){return n.some((n=>n.value===e))}function x({queryString:e=!1,groupId:n}){const t=(0,a.W6)(),r=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,d.aZ)(r),(0,s.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(t.location.search);n.set(r,e),t.replace({...t.location,search:n.toString()})}),[r,t])]}function j(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,i=u(e),[a,d]=(0,s.useState)((()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find((e=>e.default))??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:i}))),[c,h]=x({queryString:t,groupId:r}),[j,m]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,r]=(0,o.Dv)(n);return[t,(0,s.useCallback)((e=>{n&&r.set(e)}),[n,r])]}({groupId:r}),g=(()=>{const e=c??j;return p({value:e,tabValues:i})?e:null})();(0,l.A)((()=>{g&&d(g)}),[g]);return{selectedValue:a,selectValue:(0,s.useCallback)((e=>{if(!p({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);d(e),h(e),m(e)}),[h,m,i]),tabValues:i}}var m=t(2303);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var f=t(4848);function b({className:e,block:n,selectedValue:t,selectValue:s,tabValues:a}){const l=[],{blockElementScrollPositionUntilNextRender:d}=(0,i.a_)(),c=e=>{const n=e.currentTarget,r=l.indexOf(n),i=a[r].value;i!==t&&(d(n),s(i))},o=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=l.indexOf(e.currentTarget)+1;n=l[t]??l[0];break}case"ArrowLeft":{const t=l.indexOf(e.currentTarget)-1;n=l[t]??l[l.length-1];break}}n?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},e),children:a.map((({value:e,label:n,attributes:s})=>(0,f.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{l.push(e)},onKeyDown:o,onClick:c,...s,className:(0,r.A)("tabs__item",g.tabItem,s?.className,{"tabs__item--active":t===e}),children:n??e},e)))})}function y({lazy:e,children:n,selectedValue:t}){const i=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=i.find((e=>e.props.value===t));return e?(0,s.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:i.map(((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==t})))})}function v(e){const n=j(e);return(0,f.jsxs)("div",{className:(0,r.A)("tabs-container",g.tabList),children:[(0,f.jsx)(b,{...n,...e}),(0,f.jsx)(y,{...n,...e})]})}function w(e){const n=(0,m.A)();return(0,f.jsx)(v,{...e,children:h(e.children)},String(n))}},2811:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>p,frontMatter:()=>d,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"developer-tools/python/basic-usage","title":"Basic Usage","description":"Once you have installed bavapi and acquired a token from the Fount, you can start using bavapi directly in Python","source":"@site/docs/developer-tools/python/basic-usage.md","sourceDirName":"developer-tools/python","slug":"/developer-tools/python/basic-usage","permalink":"/docs/2.x/developer-tools/python/basic-usage","draft":false,"unlisted":false,"editUrl":"https://github.com/wppbav/developer.wppbav.com/edit/main/docs/developer-tools/python/basic-usage.md","tags":[],"version":"current","frontMatter":{"sidebar_label":"Basic Usage"},"sidebar":"toolsSidebar","previous":{"title":"Reference Classes","permalink":"/docs/2.x/developer-tools/python/reference-classes"},"next":{"title":"Advanced Usage","permalink":"/docs/2.x/developer-tools/python/advanced-usage"}}');var r=t(4848),i=t(8453),a=t(1470),l=t(9365);const d={sidebar_label:"Basic Usage"},c="Basic Usage",o={},h=[{value:"Making Requests",id:"making-requests",level:2},{value:"<code>bavapi</code> query parameters",id:"bavapi-query-parameters",level:2},{value:"Filters",id:"filters",level:3},{value:"Value filters",id:"value-filters",level:3},{value:"Fields",id:"fields",level:3},{value:"Sort",id:"sort",level:3},{value:"Includes",id:"includes",level:3},{value:"Pagination",id:"pagination",level:3},{value:"Metric and metric group keys",id:"metric-and-metric-group-keys",level:3},{value:"Using <code>Query</code> objects",id:"using-query-objects",level:2},{value:"Formatting output",id:"formatting-output",level:2},{value:"Suppressing progress bars",id:"suppressing-progress-bars",level:2},{value:"Timeout",id:"timeout",level:2},{value:"Error handling",id:"error-handling",level:2},{value:"Warn or raise when a page fails to download",id:"warn-or-raise-when-a-page-fails-to-download",level:3},{value:"Retry failed requests",id:"retry-failed-requests",level:3}];function u(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"basic-usage",children:"Basic Usage"})}),"\n","\n",(0,r.jsxs)(n.p,{children:["Once you have installed ",(0,r.jsx)(n.code,{children:"bavapi"})," and acquired a token from the Fount, you can start using ",(0,r.jsx)(n.code,{children:"bavapi"})," directly in Python\nor in a Jupyter Notebook."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:"import bavapi\n"})}),"\n",(0,r.jsx)(n.h2,{id:"making-requests",children:"Making Requests"}),"\n",(0,r.jsxs)(n.p,{children:["You can query the available ",(0,r.jsx)(n.a,{href:"endpoints/",children:"endpoints"})," with their corresponding methods. Replace ",(0,r.jsx)(n.code,{children:"TOKEN"})," with\nyour ",(0,r.jsx)(n.a,{href:"authentication",children:"API key"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'swatch = bavapi.brands("TOKEN", name="Swatch")  # Replace `TOKEN` with your API key\n'})}),"\n",(0,r.jsx)(n.p,{children:"These endpoints methods will return a pandas DataFrame containing the data retrieved for your query:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"right"}}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"id"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"name"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"..."})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"0"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"2342"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Swatch"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"..."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"1"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"127896"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Swatch"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"..."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"..."}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"..."}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"..."}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"..."})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["You can make requests to other ",(0,r.jsx)(n.a,{href:"endpoints/",children:"endpoints"})," in the same way:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'uk_studies = bavapi.studies("TOKEN", country_code="GB")\n\nuk22 = bavapi.brandscape_data("TOKEN", year_numbers=2022, country_code="GB", audiences=1)\n\nall_adults = bavapi.audiences("TOKEN", name="All Adults")\n'})}),"\n",(0,r.jsxs)(n.admonition,{title:"Want to use other endpoints?",type:"info",children:[(0,r.jsx)(n.p,{children:"The BAV API is very extensive, so not all endpoints are fully implemented yet."}),(0,r.jsxs)(n.p,{children:["To query unsupported endpoints see the ",(0,r.jsx)(n.a,{href:"advanced-usage#other-endpoints",children:"Other endpoints"})," section in Advanced Usage."]})]}),"\n",(0,r.jsxs)(n.h2,{id:"bavapi-query-parameters",children:[(0,r.jsx)(n.code,{children:"bavapi"})," query parameters"]}),"\n",(0,r.jsxs)(n.p,{children:["In order to validate the request parameters before sending a bad request, ",(0,r.jsx)(n.code,{children:"bavapi"})," will automatically check that the\nparameters from your query and filters are of the type expected by the Fount API. If any parameter doesn't conform to\nthe API requirements, ",(0,r.jsx)(n.code,{children:"bavapi"})," will raise a ",(0,r.jsx)(n.code,{children:"ValidationError"}),"."]}),"\n",(0,r.jsxs)(n.admonition,{title:"What it's doing",type:"note",children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"bavapi"})," performs an initial request to make sure the query parameters are valid, and to retrieve information about the\nnumber of pages it will need to fetch."]}),(0,r.jsxs)(n.p,{children:["If the initial request fails, ",(0,r.jsx)(n.code,{children:"bavapi"})," will not perform more requests."]}),(0,r.jsxs)(n.p,{children:["Similarly, if the initial request returns the entirety of the query (e.g., there are only 10 results and ",(0,r.jsx)(n.code,{children:"per_page"})," is\nabove 10, which it is by default), no further requests will be performed, and instead the data from the initial response\nwill be returned."]})]}),"\n",(0,r.jsx)(n.h3,{id:"filters",children:"Filters"}),"\n",(0,r.jsx)(n.p,{children:"Each endpoint has a filter class associated with it, as each endpoint has its own filter requirements:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Endpoint"}),(0,r.jsx)(n.th,{children:"Filters class"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"audiences"'})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"AudiencesFilters"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"brand-metrics"'})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"BrandMetricsFilters"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"brand-metric-groups"'})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"BrandMetricGroupsFilters"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"brands"'})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"BrandsFilters"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"brandscape-data"'})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"BrandscapeFilters"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"categories"'})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"CategoriesFilters"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"collections"'})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"CollectionsFilters"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"companies"'})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"CompaniesFilters"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"sectors"'})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"SectorsFilters"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"studies"'})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"StudiesFilters"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"years"'})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"YearsFilters"})})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["These filters are available under the ",(0,r.jsx)(n.code,{children:"bavapi.filters"})," namespace."]}),"\n",(0,r.jsxs)(n.admonition,{title:"Don't mix and match filters",type:"caution",children:[(0,r.jsx)(n.p,{children:"Using a filters class not meant for a specific endpoint won't raise any errors from the outset, but it also won't\nprovide IDE type support or type validation to the parameters that are associated with each endpoint."}),(0,r.jsx)(n.p,{children:"Similarly, using a dictionary (as seen in the example below) won't provide validation or type hints. Use the dictionary\nmethod with caution."})]}),"\n",(0,r.jsxs)(n.p,{children:["Some of the more common filters for each endpoint have been added directly to the ",(0,r.jsx)(n.code,{children:"bavapi"})," functions. More info in the\n",(0,r.jsx)(n.a,{href:"./endpoints/",children:"endpoints"})," section."]}),"\n",(0,r.jsx)(n.admonition,{title:"Example",type:"info",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"bavapi.brands"})," has parameters such as ",(0,r.jsx)(n.code,{children:"name"}),", ",(0,r.jsx)(n.code,{children:"country_codes"}),", ",(0,r.jsx)(n.code,{children:"year_numbers"}),", ",(0,r.jsx)(n.code,{children:"brand_id"})," or ",(0,r.jsx)(n.code,{children:"studies"}),", which you can\nuse directly from the function without creating a filters instance."]})}),"\n",(0,r.jsxs)(n.p,{children:["However, less commonly used filters, as well as ",(0,r.jsx)(n.a,{href:"#value-filters",children:"value filters"})," must be specified by using the ",(0,r.jsx)(n.code,{children:"filters"}),"\nparameters in each function."]}),"\n",(0,r.jsx)(n.p,{children:"Filters can be specified using a python dictionary (if you know the name of the filters you need), or directly creating\na filter instance."}),"\n",(0,r.jsxs)(a.A,{children:[(0,r.jsx)(l.A,{value:"filters",label:"Filters instance (recommended)",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'result = bavapi.brands(\n    filters=bavapi.filters.BrandsFilters(name="Swatch", country_codes=["US", "UK"])\n)\n'})})}),(0,r.jsx)(l.A,{value:"dict",label:"Dictionary",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'result = bavapi.brands(\n    filters={"name":"Swatch", "country_codes":["US", "UK"]}\n)\n'})})})]}),"\n",(0,r.jsxs)(n.admonition,{type:"caution",children:[(0,r.jsx)(n.p,{children:"If both regular function parameters and filters are specified, the values in the filters parameter will take precedence\nfor the actual request:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'result = bavapi.brands(name="Swatch", filters={"name": "Facebook"})\n'})}),(0,r.jsxs)(n.p,{children:["The request will use ",(0,r.jsx)(n.code,{children:'name="Facebook"'}),", because values specified in the ",(0,r.jsx)(n.code,{children:"filters"})," parameter take precedence."]})]}),"\n",(0,r.jsx)(n.h3,{id:"value-filters",children:"Value filters"}),"\n",(0,r.jsx)(n.p,{children:'"Value" filters refer to filtering on the values of the data returned by the endpoint. For example, filtering by\ncategory name or by sector.'}),"\n",(0,r.jsxs)(n.p,{children:["These value filters ",(0,r.jsx)(n.strong,{children:"must"})," be specified in the ",(0,r.jsx)(n.code,{children:"filters"})," parameter. If they are added to the function call as regular\nkeyworrd arguments, a ",(0,r.jsx)(n.code,{children:"ValidationError"})," will be raised."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'bavapi.brands(name="Swatch", filters={"sector_name": "Watches"})  # ok\n\nbavapi.brands(name="Swatch", sector_name="Watches")  # raises ValidationError\n'})}),"\n",(0,r.jsxs)(n.p,{children:["When using additional value filters, which might not be available in the arguments to the function call, it is\nrecommended to use the ",(0,r.jsx)(n.code,{children:"filters"})," parameter instead of mixing function parameters and Filters parameters:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'bavapi.brands(filters=bavapi.filters.BrandsFilters(name="Swatch", sector_name="Watches"))\n'})}),"\n",(0,r.jsx)(n.h3,{id:"fields",children:"Fields"}),"\n",(0,r.jsxs)(n.p,{children:["It is possible to ",(0,r.jsx)(n.a,{href:"/docs/2.x/customizing/fields",children:"specify which fields"})," a response should contain. If so, the API will ",(0,r.jsx)(n.strong,{children:"only"}),"\nreturn those fields."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'result = bavapi.brands(name="Swatch", fields=["id", "name"])\nresult.columns  # will only have ["id", "name"] as columns\n'})}),"\n",(0,r.jsx)(n.h3,{id:"sort",children:"Sort"}),"\n",(0,r.jsxs)(n.p,{children:["It is possible to ",(0,r.jsx)(n.a,{href:"/docs/2.x/customizing/filters#sorting-results",children:"sort the data"})," by a column from the response."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'# sorted by name\nresult = bavapi.brands(name="Swatch", sort="name")\n\n# descending sorted by name (note the \'-\')\nresult = bavapi.brands(name="Swatch", sort="-name")\n'})}),"\n",(0,r.jsx)(n.p,{children:"Responses are sorted by item id, in ascending order, by default."}),"\n",(0,r.jsx)(n.h3,{id:"includes",children:"Includes"}),"\n",(0,r.jsx)(n.p,{children:"Aside from the data directly available for each of the resources in the Fount, these resources can also be connected\nacross endpoints."}),"\n",(0,r.jsxs)(n.p,{children:["Each endpoint supports different ",(0,r.jsx)(n.a,{href:"/docs/2.x/customizing/includes",children:"included fields"}),". Please read the\n",(0,r.jsx)(n.a,{href:"/docs/2.x/intro",children:"API documentation"})," for more info on the specific set of includes supported by each endpoint."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'# will include info about the brand\'s company\nresult = bavapi.brands(name="Swatch", includes="company")\n'})}),"\n",(0,r.jsx)(n.admonition,{title:"Default Includes",type:"note",children:(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"brandscape_data"})," function includes ",(0,r.jsx)(n.code,{children:"study"}),", ",(0,r.jsx)(n.code,{children:"brand"}),", ",(0,r.jsx)(n.code,{children:"category"})," and ",(0,r.jsx)(n.code,{children:"audience"})," by default."]})}),"\n",(0,r.jsx)(n.h3,{id:"pagination",children:"Pagination"}),"\n",(0,r.jsxs)(n.p,{children:["All requests to the Fount are ",(0,r.jsx)(n.a,{href:"/docs/2.x/pagination",children:"paginated"}),", meaning that one must request and receive from the server\none page at a time. The SDK automatically combines all responses into one data table for convenience."]}),"\n",(0,r.jsx)(n.p,{children:"Pagination is controlled by three parameters:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"page"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"per_page"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"max_pages"})}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["If only ",(0,r.jsx)(n.code,{children:"page"})," is set to an integer greater than ",(0,r.jsx)(n.code,{children:"0"}),", that single page will be requested."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:"bavapi.studies(page=1)  # Will request a single page of data\n"})}),"\n",(0,r.jsxs)(n.p,{children:["If either ",(0,r.jsx)(n.code,{children:"per_page"})," or ",(0,r.jsx)(n.code,{children:"max_pages"})," are set, ",(0,r.jsx)(n.code,{children:"bavapi"})," will request the appropriate pages from the Fount API."]}),"\n",(0,r.jsxs)(n.p,{children:["While the Fount API default is ",(0,r.jsx)(n.code,{children:"25"}),", the default ",(0,r.jsx)(n.code,{children:"per_page"})," set by ",(0,r.jsx)(n.code,{children:"bavapi"})," is ",(0,r.jsx)(n.code,{children:"100"}),"."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["The maximum number of elements per page allowed by the Fount API is ",(0,r.jsx)(n.code,{children:"1000"}),"."]})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"bavapi"})," will calculate the number of pages from the total items reported by the Fount."]}),"\n",(0,r.jsxs)(n.p,{children:["It is also possible to set the number of ",(0,r.jsx)(n.code,{children:"max_pages"}),", which will limit the number of pages requested regardless of the\nreported total."]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"page"})," value will be used as the starting page for the request. Therefore, if ",(0,r.jsx)(n.code,{children:"page=10"})," and, for example,\n",(0,r.jsx)(n.code,{children:"max_pages=30"}),", ",(0,r.jsx)(n.code,{children:"bavapi"})," will request pages ",(0,r.jsx)(n.code,{children:"10"})," to ",(0,r.jsx)(n.code,{children:"40"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'# Request pages with 50 items per page\n# up to pages calculated from total reported\nbavapi.studies("TOKEN", per_page=50)\n\n# Request pages with 100 items (default) per page up to 10 pages\n# or pages calculated from total reported, whichever is smaller\nbavapi.studies("TOKEN", max_pages=10)\n\n# Request pages with 10 items per page up to 100 pages\n# or pages calculated from total reported, whichever is smaller\nbavapi.studies("TOKEN", per_page=10, max_pages=100)\n\n# Request pages with 100 items (default) per page from page 3 to 33\n# or pages calculated from total reported, whichever is smaller\nbavapi.studies("TOKEN", page=3, max_pages=30)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"metric-and-metric-group-keys",children:"Metric and metric group keys"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"metric_keys"})," and ",(0,r.jsx)(n.code,{children:"metric_group_keys"})," are special filters to specify the data ",(0,r.jsx)(n.em,{children:"columns"})," that the response should\ncontain."]}),"\n",(0,r.jsx)(n.p,{children:"The API response will include all score types for that metric or metric group."}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Currently, only the ",(0,r.jsx)(n.code,{children:"brandscape-data"})," endpoint supports the use of metric and metric group keys. All other endpoints\nwill ignore this parameter. More info in the\n",(0,r.jsx)(n.a,{href:"/docs/2.x/developer-tools/python/endpoints/brandscape-data#metric-and-metric-group-keys",children:(0,r.jsx)(n.code,{children:"brandscape-data"})})," endpoint section."]})}),"\n",(0,r.jsxs)(n.h2,{id:"using-query-objects",children:["Using ",(0,r.jsx)(n.code,{children:"Query"})," objects"]}),"\n",(0,r.jsxs)(n.p,{children:["While the available parameters in endpoint functions and methods are provided for convenience, it is possible to use\n",(0,r.jsx)(n.code,{children:"bavapi.Query"})," objects directly inside function calls."]}),"\n",(0,r.jsxs)(n.p,{children:["Similarly to filters objects, when using ",(0,r.jsx)(n.code,{children:"Query"})," in one of the endpoint methods, the parameter values specified in the\n",(0,r.jsx)(n.code,{children:"Query"})," object will take precedence over parameters specified at the function level."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'# will use `name="Facebook"` because `query` values take precedence.\nbavapi.brands(name="Swatch", query=bavapi.Query(filters={"name":"Facebook"}))\n'})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Read more about ",(0,r.jsx)(n.code,{children:"Query"})," in the ",(0,r.jsx)(n.a,{href:"./advanced-usage#the-query-class",children:"Advanced usage"})," section."]})}),"\n",(0,r.jsx)(n.h2,{id:"formatting-output",children:"Formatting output"}),"\n",(0,r.jsx)(n.p,{children:"It is possible that some of the data retrieved from the Fount includes multiple items."}),"\n",(0,r.jsxs)(n.admonition,{title:"Example",type:"info",children:[(0,r.jsxs)(n.p,{children:["For example, requesting the ",(0,r.jsx)(n.code,{children:"studies"})," include in ",(0,r.jsx)(n.code,{children:"bavapi.brands"})," will return a column containing lists of dictionaries\nwith study info for all studies that a brand appears in."]}),(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"right"}}),(0,r.jsx)(n.th,{style:{textAlign:"right"},children:"id"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"name"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"studies"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"0"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"24353"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Facebook"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"[{'id': 254, 'name': 'Argentina ..."})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"..."}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"..."}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"..."}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"..."})]})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"bavapi"})," provides a ",(0,r.jsx)(n.code,{children:"stack_data"})," parameter to its functions and methods that will take those lists of dictionaries and\ngenerate a new entry (row) in the resulting DataFrame for each element in the list."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'bavapi.brands("Facebook", include="studies", stack_data=True)\n'})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"right"}}),(0,r.jsx)(n.th,{style:{textAlign:"right"},children:"id"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"name"}),(0,r.jsx)(n.th,{style:{textAlign:"right"},children:"studies_id"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"studies_name"}),(0,r.jsx)(n.th,{children:"..."})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"0"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"24353"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Facebook"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"254"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Argentina - Adults 2011"}),(0,r.jsx)(n.td,{children:"..."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"1"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"24353"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Facebook"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"787"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Argentina - Adults 2012"}),(0,r.jsx)(n.td,{children:"..."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"..."}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"..."}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"..."}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"..."}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"..."}),(0,r.jsx)(n.td,{children:"..."})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"suppressing-progress-bars",children:"Suppressing progress bars"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"bavapi"})," displays progress bars to show download progress. Each tick in the progress bar refers to individual pages\nbeing downloaded."]}),"\n",(0,r.jsxs)(n.p,{children:["It's possible to supress progress bar outputs via the ",(0,r.jsx)(n.code,{children:"verbose"})," parameter in function calls and ",(0,r.jsx)(n.code,{children:"Client"})," init methods:"]}),"\n",(0,r.jsxs)(a.A,{children:[(0,r.jsx)(l.A,{value:"sync",label:"Sync (Won't show progress bar)",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'bavapi.brands(TOKEN, "Facebook", verbose=False)\n'})})}),(0,r.jsx)(l.A,{value:"async",label:"Async (Won't show progress bar)",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'async with bavapi.Client(TOKEN, verbose=False) as bav:\n    await bav.brands("Facebook")\n'})})})]}),"\n",(0,r.jsx)(n.h2,{id:"timeout",children:"Timeout"}),"\n",(0,r.jsx)(n.p,{children:"By default, API requests will timeout after 30 seconds in order to avoid hangups."}),"\n",(0,r.jsxs)(n.p,{children:["This may happen more commonly when performing requests with more than 50-100 pages. If you get a ",(0,r.jsx)(n.code,{children:"TimeoutError"}),", you\ncan change this parameter to allow for longer timeouts."]}),"\n",(0,r.jsxs)(n.p,{children:["It is possible to set the time before timeout when performing requests with ",(0,r.jsx)(n.code,{children:"bavapi"}),":"]}),"\n",(0,r.jsxs)(a.A,{children:[(0,r.jsx)(l.A,{value:"sync",label:"Sync",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'bavapi.brands(TOKEN, "Facebook", timeout=60)\n'})})}),(0,r.jsx)(l.A,{value:"async",label:"Async",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'async with bavapi.Client(TOKEN, timeout=60) as bav:\n    await bav.brands("Facebook")\n'})})})]}),"\n",(0,r.jsx)(n.h2,{id:"error-handling",children:"Error handling"}),"\n",(0,r.jsx)(n.h3,{id:"warn-or-raise-when-a-page-fails-to-download",children:"Warn or raise when a page fails to download"}),"\n",(0,r.jsxs)(n.p,{children:["You can control the error handling behavior of ",(0,r.jsx)(n.code,{children:"bavapi"})," by changing the ",(0,r.jsx)(n.code,{children:"on_errors"})," parameter in top-level functions\nand the ",(0,r.jsx)(n.code,{children:"Client"})," interface."]}),"\n",(0,r.jsx)(n.p,{children:"Options and examples:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"warn"'})," (default): Will return all successfully downloaded data, and warn at the end about any pages that failed"]}),"\n",(0,r.jsx)(n.li,{children:"downloading so they can be manually retried."}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"raise"'}),": Will raise any exception that occurs immediately. This was the default behavior until ",(0,r.jsx)(n.code,{children:"v0.13"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(a.A,{children:[(0,r.jsx)(l.A,{value:"warn",label:"Warn",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'>>> bavapi.brands("TOKEN", "Facebook", verbose=False, on_errors="warn") # Fails page 1\nUserWarning: Could not fetch pages: ["page 1: Exception(...)"]  # Does not raise\n'})})}),(0,r.jsx)(l.A,{value:"raise",label:"Raise",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'>>> bavapi.brands("TOKEN", "Facebook", verbose=False, on_errors="raise") # Fails page 1\nException: ...  # Raised\n'})})})]}),"\n",(0,r.jsxs)(n.admonition,{title:'"Some requests may still raise"',type:"caution",children:[(0,r.jsxs)(n.p,{children:["During the initial handshake between ",(0,r.jsx)(n.code,{children:"bavapi"})," and the Fount API, only SSL errors are retried. Therefore, some queries\nmay still raise exceptions even if ",(0,r.jsx)(n.code,{children:"on_errors"})," is set to ",(0,r.jsx)(n.code,{children:'"warn"'}),":"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Invalid parameters will raise a ",(0,r.jsx)(n.code,{children:"ValidationError"})," if they are not of the correct Python type"]}),"\n",(0,r.jsxs)(n.li,{children:["Server errors will raise an ",(0,r.jsx)(n.code,{children:"APIError"})," with additional details about the issue"]}),"\n",(0,r.jsxs)(n.li,{children:["Queries with no results found will raise a ",(0,r.jsx)(n.code,{children:"DataNotFoundError"})]}),"\n",(0,r.jsxs)(n.li,{children:["Requests which exceed the user's rate limit will raise a ",(0,r.jsx)(n.code,{children:"RateLimitExceededError"})]}),"\n"]})]}),"\n",(0,r.jsx)(n.h3,{id:"retry-failed-requests",children:"Retry failed requests"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"bavapi"})," will automatically retry requests that fail because of an exception. The number of retry attempts can be\ncontrolled via the ",(0,r.jsx)(n.code,{children:"retries"})," parameter in top-level functions and the ",(0,r.jsx)(n.code,{children:"Client"})," interface:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'bavapi.brands("TOKEN", retries=5)  # Will retry pages 5 times after original failure\n'})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["There are some additional, advanced options for controlling the behavior of ",(0,r.jsx)(n.code,{children:"bavapi"})," requests. More info in the\n",(0,r.jsxs)(n.a,{href:"advanced-usage#control-bavapi-batching-behavior",children:["Control ",(0,r.jsx)(n.code,{children:"bavapi"})," batching behavior"]})," section from the Advanced Usage\ndocumentation."]})})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>l});var s=t(6540);const r={},i=s.createContext(r);function a(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(i.Provider,{value:n},e.children)}},9365:(e,n,t)=>{t.d(n,{A:()=>a});t(6540);var s=t(8215);const r={tabItem:"tabItem_Ymn6"};var i=t(4848);function a({children:e,hidden:n,className:t}){return(0,i.jsx)("div",{role:"tabpanel",className:(0,s.A)(r.tabItem,t),hidden:n,children:e})}}}]);